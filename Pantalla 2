import streamlit as st

def mostrar_pantalla_2(cambiar_pantalla):
    st.title("üìù Prompt Generado")
    st.write("Revisa y ajusta el prompt generado basado en los par√°metros seleccionados.")

    # Recuperar los par√°metros seleccionados
    parametros = st.session_state.get("parametros", {})
    if not parametros:
        st.warning("‚ö† No se encontraron par√°metros guardados. Por favor, regresa a la Pantalla 1.")
        if st.button("Regresar a Pantalla 1"):
            cambiar_pantalla("pantalla_1")
        return

    # Generar el prompt inicial
    prompt = (
        f"Crea una imagen basada en la idea de '{parametros.get('idea_inicial', 'una idea creativa')}'. "
        f"El prop√≥sito es '{parametros.get('proposito', 'un prop√≥sito general')}', con un estilo art√≠stico de "
        f"'{parametros.get('movimiento_estetico', 'moderno')}'. "
        f"El plano fotogr√°fico debe ser '{parametros.get('plano_fotografico', 'indeterminado')}', con iluminaci√≥n "
        f"'{parametros.get('iluminacion', 'natural')}' y una composici√≥n '{parametros.get('composicion', 'sim√©trica')}'. "
        f"Detalles adicionales incluyen: '{parametros.get('efectos_visuales', 'sin efectos adicionales')}' y una paleta de colores "
        f"'{parametros.get('paleta_colores', 'vibrante')}'."
    )

    # Mostrar el prompt en un √°rea de texto editable
    prompt_editado = st.text_area("Prompt Final:", value=prompt, height=200, key="prompt_generado")

    # Bot√≥n para copiar el prompt al portapapeles
    if st.button("Copiar al Portapapeles"):
        st.session_state["prompt_copiado"] = prompt_editado
        st.success("‚úÖ Prompt copiado correctamente al portapapeles.")

    # Bot√≥n para exportar el prompt como archivo .txt
    if st.button("Exportar como .txt"):
        with open("prompt_generado.txt", "w") as file:
            file.write(prompt_editado)
        st.success("üìÅ Prompt exportado como 'prompt_generado.txt'.")

    # Bot√≥n para regresar a Pantalla 1
    if st.button("Editar Opciones"):
        cambiar_pantalla("pantalla_1")

    # Bot√≥n para avanzar a Pantalla 3
    if st.button("Ver Recomendaciones"):
        cambiar_pantalla("pantalla_3")
